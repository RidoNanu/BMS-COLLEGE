<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Analytics - Teacher Booking System Admin</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <div class="logo">
                <i class="fas fa-graduation-cap"></i>
                <span>EduBook Admin</span>
            </div>
            <button class="nav-toggle" aria-label="Toggle navigation">
                <i class="fas fa-bars"></i>
            </button>
            <nav class="nav-menu">
                <a href="dashboard.html" class="nav-link">
                    <i class="fas fa-tachometer-alt"></i>
                    Dashboard
                </a>
                <a href="bookings.html" class="nav-link">
                    <i class="fas fa-calendar-check"></i>
                    Bookings
                </a>
                <a href="analytics.html" class="nav-link active">
                    <i class="fas fa-chart-bar"></i>
                    Analytics
                </a>
                <a href="reports.html" class="nav-link">
                    <i class="fas fa-file-alt"></i>
                    Reports
                </a>
                <a href="rooms.html" class="nav-link">
                    <i class="fas fa-door-open"></i>
                    Rooms
                </a>
            </nav>
            <div class="user-profile">
                <img src="assets/admin-profile.jpg" alt="Admin" class="profile-img">
                <span class="user-name">Admin User</span>
                <i class="fas fa-chevron-down"></i>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <div class="page active">
            <div class="page-header">
                <h1>Utilization Analytics</h1>
                <p>Room usage insights and performance metrics</p>
            </div>

            <!-- Analytics Controls -->
            <div class="analytics-controls">
                <div class="control-group">
                    <label>Time Period</label>
                    <select class="control-select" id="timePeriod">
                        <option value="today">Today</option>
                        <option value="week" selected>This Week</option>
                        <option value="month">This Month</option>
                        <option value="quarter">This Quarter</option>
                        <option value="year">This Year</option>
                    </select>
                </div>
                <div class="control-group">
                    <label>View Type</label>
                    <select class="control-select" id="viewType">
                        <option value="overview" selected>Overview</option>
                        <option value="detailed">Detailed</option>
                        <option value="comparison">Comparison</option>
                    </select>
                </div>
                <div class="control-group">
                    <label>Department</label>
                    <select class="control-select" id="department">
                        <option value="all" selected>All Departments</option>
                        <option value="cs">Computer Science</option>
                        <option value="math">Mathematics</option>
                        <option value="physics">Physics</option>
                        <option value="chemistry">Chemistry</option>
                    </select>
                </div>
                <button class="btn-primary" onclick="updateAnalytics()">
                    <i class="fas fa-refresh"></i>
                    Update Analytics
                </button>
            </div>

            <!-- Key Metrics -->
            <div class="metrics-grid">
                <div class="metric-card">
                    <div class="metric-icon">
                        <i class="fas fa-chart-pie"></i>
                    </div>
                    <div class="metric-content">
                        <h3>Overall Utilization</h3>
                        <div class="metric-value">78%</div>
                        <div class="metric-change positive">+5% from last week</div>
                    </div>
                </div>
                
                <div class="metric-card">
                    <div class="metric-icon">
                        <i class="fas fa-clock"></i>
                    </div>
                    <div class="metric-content">
                        <h3>Peak Hours</h3>
                        <div class="metric-value">2:00 PM</div>
                        <div class="metric-change">Most active time</div>
                    </div>
                </div>
                
                <div class="metric-card">
                    <div class="metric-icon">
                        <i class="fas fa-door-open"></i>
                    </div>
                    <div class="metric-content">
                        <h3>Most Used Room</h3>
                        <div class="metric-value">Room 201</div>
                        <div class="metric-change">95% utilization</div>
                    </div>
                </div>
                
                <div class="metric-card">
                    <div class="metric-icon">
                        <i class="fas fa-users"></i>
                    </div>
                    <div class="metric-content">
                        <h3>Active Teachers</h3>
                        <div class="metric-value">156</div>
                        <div class="metric-change positive">+12 this week</div>
                    </div>
                </div>
            </div>

            <!-- Charts Section -->
            <div class="charts-section">
                <div class="chart-container">
                    <div class="chart-header">
                        <h3>Room Utilization Rate</h3>
                        <div class="chart-controls">
                            <button class="chart-btn active" onclick="switchChart('utilization')">Utilization</button>
                            <button class="chart-btn" onclick="switchChart('occupancy')">Occupancy</button>
                            <button class="chart-btn" onclick="switchChart('efficiency')">Efficiency</button>
                        </div>
                    </div>
                    <div class="chart-content">
                        <div class="chart-circle" id="utilizationChart">
                            <div class="chart-progress" data-percentage="78"></div>
                            <span class="chart-text">78%</span>
                        </div>
                        <div class="chart-legend">
                            <div class="legend-item">
                                <span class="legend-color" style="background: #1B3C53;"></span>
                                <span>Utilized</span>
                            </div>
                            <div class="legend-item">
                                <span class="legend-color" style="background: #D2C1B6;"></span>
                                <span>Available</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="chart-container">
                    <div class="chart-header">
                        <h3>Peak Hours Analysis</h3>
                        <div class="chart-controls">
                            <button class="chart-btn active" onclick="switchTimeChart('daily')">Daily</button>
                            <button class="chart-btn" onclick="switchTimeChart('weekly')">Weekly</button>
                        </div>
                    </div>
                    <div class="chart-content">
                        <div class="bar-chart" id="peakHoursChart">
                            <div class="bar" style="height: 40%"></div>
                            <div class="bar" style="height: 60%"></div>
                            <div class="bar" style="height: 80%"></div>
                            <div class="bar" style="height: 100%"></div>
                            <div class="bar" style="height: 70%"></div>
                            <div class="bar" style="height: 50%"></div>
                            <div class="bar" style="height: 30%"></div>
                            <div class="bar" style="height: 20%"></div>
                        </div>
                        <div class="chart-labels">
                            <span>9AM</span>
                            <span>10AM</span>
                            <span>11AM</span>
                            <span>12PM</span>
                            <span>1PM</span>
                            <span>2PM</span>
                            <span>3PM</span>
                            <span>4PM</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Detailed Analytics -->
            <div class="analytics-details">
                <div class="analytics-section">
                    <div class="section-header">
                        <h3>Room Usage by Department</h3>
                        <button class="btn-outline" onclick="exportDepartmentData()">
                            <i class="fas fa-download"></i>
                            Export
                        </button>
                    </div>
                    <div class="usage-list">
                        <div class="usage-item">
                            <div class="usage-info">
                                <span class="dept-name">Computer Science</span>
                                <span class="usage-count">45 bookings</span>
                            </div>
                            <div class="usage-bar">
                                <div class="usage-fill" style="width: 85%"></div>
                            </div>
                            <span class="usage-percentage">85%</span>
                        </div>
                        <div class="usage-item">
                            <div class="usage-info">
                                <span class="dept-name">Mathematics</span>
                                <span class="usage-count">38 bookings</span>
                            </div>
                            <div class="usage-bar">
                                <div class="usage-fill" style="width: 72%"></div>
                            </div>
                            <span class="usage-percentage">72%</span>
                        </div>
                        <div class="usage-item">
                            <div class="usage-info">
                                <span class="dept-name">Physics</span>
                                <span class="usage-count">32 bookings</span>
                            </div>
                            <div class="usage-bar">
                                <div class="usage-fill" style="width: 68%"></div>
                            </div>
                            <span class="usage-percentage">68%</span>
                        </div>
                        <div class="usage-item">
                            <div class="usage-info">
                                <span class="dept-name">Chemistry</span>
                                <span class="usage-count">28 bookings</span>
                            </div>
                            <div class="usage-bar">
                                <div class="usage-fill" style="width: 55%"></div>
                            </div>
                            <span class="usage-percentage">55%</span>
                        </div>
                        <div class="usage-item">
                            <div class="usage-info">
                                <span class="dept-name">Biology</span>
                                <span class="usage-count">22 bookings</span>
                            </div>
                            <div class="usage-bar">
                                <div class="usage-fill" style="width: 42%"></div>
                            </div>
                            <span class="usage-percentage">42%</span>
                        </div>
                    </div>
                </div>

                <div class="analytics-section">
                    <div class="section-header">
                        <h3>Monthly Trends</h3>
                        <div class="trend-controls">
                            <select class="control-select" id="trendMetric">
                                <option value="bookings">Total Bookings</option>
                                <option value="utilization">Utilization Rate</option>
                                <option value="revenue">Revenue</option>
                            </select>
                        </div>
                    </div>
                    <div class="trend-chart">
                        <canvas id="trendChart" width="400" height="200"></canvas>
                    </div>
                    <div class="trend-summary">
                        <div class="trend-item">
                            <span class="trend-label">Average Bookings/Day</span>
                            <span class="trend-value">47</span>
                        </div>
                        <div class="trend-item">
                            <span class="trend-label">Peak Day</span>
                            <span class="trend-value">Wednesday</span>
                        </div>
                        <div class="trend-item">
                            <span class="trend-label">Growth Rate</span>
                            <span class="trend-value positive">+12%</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Room Performance Table -->
            <div class="performance-table">
                <div class="table-header">
                    <h3>Room Performance Details</h3>
                    <div class="table-actions">
                        <button class="btn-secondary" onclick="refreshPerformanceData()">
                            <i class="fas fa-refresh"></i>
                            Refresh
                        </button>
                    </div>
                </div>
                <div class="table-container">
                    <table class="performance-table-content">
                        <thead>
                            <tr>
                                <th>Room</th>
                                <th>Capacity</th>
                                <th>Utilization</th>
                                <th>Bookings</th>
                                <th>Revenue</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Room 201</td>
                                <td>40</td>
                                <td>
                                    <div class="utilization-bar">
                                        <div class="utilization-fill" style="width: 95%"></div>
                                        <span class="utilization-text">95%</span>
                                    </div>
                                </td>
                                <td>47</td>
                                <td>$2,350</td>
                                <td><span class="status excellent">Excellent</span></td>
                                <td>
                                    <button class="action-icon" onclick="viewRoomDetails('201')" title="View Details">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>Room 105</td>
                                <td>30</td>
                                <td>
                                    <div class="utilization-bar">
                                        <div class="utilization-fill" style="width: 78%"></div>
                                        <span class="utilization-text">78%</span>
                                    </div>
                                </td>
                                <td>32</td>
                                <td>$1,600</td>
                                <td><span class="status good">Good</span></td>
                                <td>
                                    <button class="action-icon" onclick="viewRoomDetails('105')" title="View Details">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>Room 301</td>
                                <td>25</td>
                                <td>
                                    <div class="utilization-bar">
                                        <div class="utilization-fill" style="width: 65%"></div>
                                        <span class="utilization-text">65%</span>
                                    </div>
                                </td>
                                <td>28</td>
                                <td>$1,400</td>
                                <td><span class="status average">Average</span></td>
                                <td>
                                    <button class="action-icon" onclick="viewRoomDetails('301')" title="View Details">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-section">
                <h4></h4>
                <p>Comprehensive classroom booking and management system</p>
            </div>
            <div class="footer-section">
                <h4>Quick Links</h4>
                <ul>
                    <li><a href="dashboard.html">Dashboard</a></li>
                    <li><a href="bookings.html">Bookings</a></li>
                    <li><a href="analytics.html">Analytics</a></li>
                    <li><a href="reports.html">Reports</a></li>
                    <li><a href="rooms.html">Rooms</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h4>Support</h4>
                <ul>
                    <li><a href="#">Help Center</a></li>
                    <li><a href="#">Contact Us</a></li>
                    <li><a href="#">Documentation</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h4>System Status</h4>
                <div class="status-indicator">
                    <span class="status-dot online"></span>
                    <span>All Systems Operational</span>
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2024 All rights reserved.</p>
        </div>
    </footer>

    <script src="script.js"></script>
    <script>
        // Analytics specific functionality
        document.addEventListener('DOMContentLoaded', function() {
            initializeAnalyticsPage();
        });

        function initializeAnalyticsPage() {
            // Initialize charts
            updateAnalyticsCharts();
            
            // Set up event listeners
            setupAnalyticsControls();
        }

        function setupAnalyticsControls() {
            document.getElementById('timePeriod').addEventListener('change', updateAnalytics);
            document.getElementById('viewType').addEventListener('change', updateAnalytics);
            document.getElementById('department').addEventListener('change', updateAnalytics);
        }

        function updateAnalytics() {
            const timePeriod = document.getElementById('timePeriod').value;
            const viewType = document.getElementById('viewType').value;
            const department = document.getElementById('department').value;

            console.log('Updating analytics:', { timePeriod, viewType, department });
            
            showNotification('Updating analytics...', 'info');
            
            // Simulate data loading
            setTimeout(() => {
                updateAnalyticsCharts();
                showNotification('Analytics updated successfully', 'success');
            }, 1000);
        }

        function updateAnalyticsCharts() {
            // Animate utilization chart
            const chartProgress = document.querySelector('.chart-progress');
            if (chartProgress) {
                const percentage = 78;
                chartProgress.style.background = `conic-gradient(#1B3C53 0deg ${percentage * 3.6}deg, #D2C1B6 ${percentage * 3.6}deg 360deg)`;
            }

            // Animate bar chart
            const bars = document.querySelectorAll('.bar');
            bars.forEach((bar, index) => {
                setTimeout(() => {
                    bar.style.height = bar.style.height;
                }, index * 100);
            });

            // Animate usage bars
            const usageFills = document.querySelectorAll('.usage-fill');
            usageFills.forEach((fill, index) => {
                setTimeout(() => {
                    const width = fill.style.width;
                    fill.style.width = '0%';
                    setTimeout(() => {
                        fill.style.width = width;
                    }, 100);
                }, index * 200);
            });
        }

        function switchChart(type) {
            // Update active button
            document.querySelectorAll('.chart-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            console.log('Switching chart to:', type);
            showNotification(`Switched to ${type} view`, 'info');
        }

        function switchTimeChart(type) {
            // Update active button
            document.querySelectorAll('.chart-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            console.log('Switching time chart to:', type);
            showNotification(`Switched to ${type} view`, 'info');
        }

        function exportDepartmentData() {
            showNotification('Exporting department data...', 'info');
            setTimeout(() => {
                showNotification('Department data exported successfully', 'success');
            }, 2000);
        }

        function refreshPerformanceData() {
            showNotification('Refreshing performance data...', 'info');
            setTimeout(() => {
                showNotification('Performance data refreshed', 'success');
            }, 1000);
        }

        function viewRoomDetails(roomNumber) {
            showModal(`Room ${roomNumber} Details`, getRoomDetailsForm(roomNumber));
        }
    </script>
</body>
</html>
